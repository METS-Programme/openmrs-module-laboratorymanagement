package org.openmrs.module.labmanagement.api.utils;

import org.apache.commons.lang.StringUtils;
import org.openmrs.module.labmanagement.api.ModuleConstants;
import org.openmrs.util.OpenmrsUtil;

import java.io.File;
import java.util.Arrays;

public class FileUtil {

	public static File getWorkingDirectory() {
		File workingDirectory = OpenmrsUtil.getDirectoryInApplicationDataDirectory(ModuleConstants.APP_DATA_WORKING_DIR);
		return workingDirectory;
	}

	public static File getBatchJobFolder() {
		File folder = new File(getWorkingDirectory(), "batchjob");
		if (!folder.exists()) {
			folder.mkdirs();
		}
		return folder;
	}

	public static boolean isBlockedExtension(String extension) {
		String[] extensions = new String[]{".apk",
				".jar",
				".ahk",
				".fap",
				".ipa",
				".run",
				".cmd",
				".xbe",
				".0xe",
				".vlx",
				".workflow",
				".u3p",
				".bat",
				".bms",
				".exe",
				".bin",
				".x86",
				".8ck",
				".elf",
				".gadget",
				".air",
				".xap",
				".app",
				".widget",
				".shortcut",
				".fba",
				".scpt",
				".mpk",
				".rbf",
				".x86_64",
				".ac",
				".com",
				".xlm",
				".rxe",
				".appimage",
				".pif",
				".tpk",
				".sh",
				".out",
				".73k",
				".script",
				".ex5",
				".command",
				".ebs2",
				".celx",
				".scb",
				".ba_",
				".ps1",
				".paf.exe",
				".scar",
				".xex",
				".scr",
				".isu",
				".fas",
				".coffee",
				".action",
				".tcp",
				".acc",
				".shb",
				".rfu",
				".hta",
				".cgi",
				".sk",
				".ex_",
				".nexe",
				".xbap",
				".ecf",
				".fxp",
				".vpm",
				".plsc",
				".rpj",
				".ws",
				".vbs",
				".cof",
				".mlx",
				".dld",
				".vxp",
				".caction",
				".mm",
				".plx",
				".wsh",
				".ex_",
				".iim",
				".phar",
				".js",
				".89k",
				".cheat",
				".ebs",
				".pex",
				".fpi",
				".a7r",
				".mel",
				".server",
				".gpe",
				".wcm",
				".esh",
				".dek",
				".pyc",
				".ex4",
				".jsf",
				".jsx",
				".acr",
				".pwc",
				".exe1",
				".ear",
				".icd",
				".vexe",
				".rox",
				".cel",
				".azw2",
				".snap",
				".zl9",
				".rgs",
				".mcr",
				".epk",
				".paf",
				".ms",
				".89z",
				".atmx",
				".gm9",
				".uvm",
				".srec",
				".tiapp",
				".applescript",
				".frs",
				".msl",
				".otm",
				".pyo",
				".hms",
				".actc",
				".mrp",
				".n",
				".widget",
				".wiz",
				".beam",
				".mrc",
				".csh",
				".prg",
				".osx",
				".cyw",
				".mcr",
				".spr",
				".sct",
				".mcr",
				".ebm",
				".tms",
				".fas",
				".xqt",
				".prg",
				".ygh",
				".fky",
				".tipa",
				".app",
				".actm",
				".mxe",
				".udf",
				".kix",
				".seed",
				".kx",
				".ipk",
				".vbscript",
				".app",
				".ezs",
				".thm",
				".lo",
				".vbe",
				".e_e",
				".gs",
				".jse",
				".ita",
				".exz",
				".prg",
				".sca",
				".mhm",
				".xys",
				".ms",
				".dmc",
				".pxo",
				".scptd",
				".prc",
				".wpk",
				".ls",
				".s2a",
				".hpf",
				".eham",
				".qit",
				".es",
				".arscript",
				".rbx",
				".mem",
				".sapk",
				".wsf",
				".ebacmd",
				".mam",
				".ncl",
				".upx",
				".ksh",
				".dxl",
				".ham",
				".btm",
				".vdo",
				".gpu",
				".ipf",
				".mio",
				".exopc",
				".ds",
				".mac",
				".sbs",
				".cfs",
				".asb",
				".sts",
				".rfs",
				".wpm",
				".qpx",
				".rpg",
				".pvd",
				".pyz",
				".p",
				".mlappinstall",
				".uw8",
				".afmacros",
				".afmacro",
				".ore",
				".ezt",
				".smm",
				".73p",
				".mamc",
				".bns"
		};
		if(StringUtils.isBlank(extension)) return true;
		extension = extension.toLowerCase().trim();
		return Arrays.asList(extensions).contains(extension);
	}
}
